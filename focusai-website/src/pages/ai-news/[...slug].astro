---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import { getCollection, render } from 'astro:content';
import { siteConfig } from '../../data';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.id },
    props: post,
  }));
}

const post = Astro.props;
const { Content } = await render(post);

// Format date in Hebrew
function formatDate(date: Date): string {
  return date.toLocaleDateString('he-IL', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
}

// Calculate reading time from raw body
const wordsPerMinute = 200;
const rawBody = post.body || '';
const wordCount = rawBody.trim().split(/\s+/).length;
const readingTime = Math.max(1, Math.ceil(wordCount / wordsPerMinute));

// Get all posts for sidebar
const allPosts = await getCollection('blog');

// Related posts (same tags, max 4)
const relatedPosts = allPosts
  .filter(p => p.id !== post.id)
  .filter(p => p.data.tags?.some((tag: string) => post.data.tags?.includes(tag)))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 4);

// Latest posts for sidebar (if not enough related)
const latestPosts = allPosts
  .filter(p => p.id !== post.id)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 4);

const sidebarPosts = relatedPosts.length >= 2 ? relatedPosts : latestPosts;

// Webhook URL for contact form
const webhookUrl = 'https://focus2025.app.n8n.cloud/webhook/59315ca5-4434-4995-8e5f-22eecf48c64c';

// Social links
const socialFollowLinks = [
  { href: siteConfig.social.instagram, label: 'Instagram', color: '#E4405F', icon: 'instagram' },
  { href: siteConfig.social.facebook, label: 'Facebook', color: '#1877F2', icon: 'facebook' },
  { href: siteConfig.social.tiktok, label: 'TikTok', color: '#ffffff', icon: 'tiktok' },
  { href: siteConfig.social.whatsappCommunity, label: 'קהילת WhatsApp', color: '#25D366', icon: 'whatsapp' },
];

// Category label
const categoryLabel = (post.data.category || 'news') === 'guide' ? 'מדריך' :
                       (post.data.category || 'news') === 'tutorial' ? 'הדרכה' : 'חדשות';
const categoryColor = (post.data.category || 'news') === 'guide' ? 'bg-emerald-500' :
                       (post.data.category || 'news') === 'tutorial' ? 'bg-blue-500' : 'bg-[#a855f7]';

// Page URL for sharing
const pageUrl = `https://focusai.co.il/ai-news/${post.id}`;

// BlogPosting structured data for SEO
const blogPostingSchema = {
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": post.data.title,
  "description": post.data.description,
  "image": post.data.heroImage || undefined,
  "datePublished": post.data.pubDate.toISOString(),
  "dateModified": (post.data.updatedDate || post.data.pubDate).toISOString(),
  "author": {
    "@type": "Organization",
    "name": "Focus AI",
    "url": "https://focusai.co.il"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Focus AI",
    "logo": {
      "@type": "ImageObject",
      "url": siteConfig.assets.logo
    }
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": pageUrl
  },
  "wordCount": wordCount,
  "inLanguage": "he-IL",
  "keywords": post.data.tags?.join(', ') || '',
  "articleSection": post.data.category === 'guide' ? 'מדריכים' : post.data.category === 'tutorial' ? 'הדרכות' : 'חדשות AI'
};

// BreadcrumbList structured data
const breadcrumbSchema = {
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    { "@type": "ListItem", "position": 1, "name": "בית", "item": "https://focusai.co.il/" },
    { "@type": "ListItem", "position": 2, "name": "חדשות AI", "item": "https://focusai.co.il/ai-news/" },
    { "@type": "ListItem", "position": 3, "name": post.data.title, "item": pageUrl }
  ]
};

// CTA config based on article ctaType
const ctaType = post.data.ctaType || 'botcamp';
const ctaConfig = {
  botcamp: {
    formTitle: 'קראתם על זה. עכשיו תבנו את זה.',
    formDesc: '12 מפגשים פרונטליים בהרצליה פיתוח. קבוצה קטנה של 18 משתתפים. 3 מנחים שמלווים אתכם צעד אחר צעד. תבנו אוטומציות אמיתיות עם n8n, תפתחו סוכני AI, ותצאו עם תיק עבודות ותעודה מקצועית.',
    formPlaceholder: 'מה הרקע שלכם? ניסיון קודם באוטומציה?',
    formSource: 'blog-article-botcamp',
    formInterest: 'bot-camp',
    linkText: 'לסילבוס, לוח זמנים ופרטים נוספים',
    linkHref: '/academy',
    linkLabel: 'Bot-Camp - הכשרה מקצועית',
  },
  agents: {
    formTitle: 'צריכים סוכן AI שעובד בשביל העסק?',
    formDesc: 'אנחנו בונים סוכני AI, בוטים ומערכות אוטומציה מותאמים אישית. מניתוח צרכים ועד הטמעה מלאה - כולל תמיכה ואופטימיזציה שוטפת.',
    formPlaceholder: 'ספרו לנו על העסק שלכם ומה אתם מחפשים',
    formSource: 'blog-article-agents',
    formInterest: 'ai-agents',
    linkText: 'לשירותי AI לעסקים',
    linkHref: '/ai-agents',
    linkLabel: 'שירותי AI לעסקים',
  },
  consulting: {
    formTitle: 'רוצים אסטרטגיית AI לארגון?',
    formDesc: 'ייעוץ אסטרטגי להטמעת AI בארגון. מיפוי תהליכים, בחירת כלים, תכנית הטמעה מותאמת ומדידת ROI. ניסיון עם חברות מובילות במשק.',
    formPlaceholder: 'ספרו על הארגון ועל האתגרים בתחום ה-AI',
    formSource: 'blog-article-consulting',
    formInterest: 'consulting',
    linkText: 'לייעוץ אסטרטגי',
    linkHref: '/services/strategy',
    linkLabel: 'ייעוץ אסטרטגי',
  },
}[ctaType];
---

<BaseLayout title={`${post.data.title} | Focus AI`} description={post.data.description} image={post.data.heroImage} ogType="article" structuredData={[blogPostingSchema, breadcrumbSchema]}>
  <Header slot="header" currentPath="/ai-news" />

  <!-- Hero Image - Full Width -->
  {post.data.heroImage && (
    <div class="relative w-full h-[200px] sm:h-[300px] md:h-[400px] lg:h-[480px] mt-16 overflow-hidden">
      <img
        src={post.data.heroImage}
        alt={post.data.title}
        class="w-full h-full object-cover"
      />
      <div class="absolute inset-0 bg-gradient-to-t from-[#0a0a0f] via-[#0a0a0f]/40 to-transparent"></div>
      <!-- Category badge -->
      <div class="absolute top-4 right-4 sm:top-6 sm:right-6">
        <span class={`px-3 py-1 text-xs sm:px-4 sm:py-1.5 sm:text-sm font-bold rounded-full text-white ${categoryColor}`}>
          {categoryLabel}
        </span>
      </div>
    </div>
  )}

  <!-- Main Content Area -->
  <article class="relative pt-8 pb-16">
    <!-- Background Effects -->
    <div class="absolute inset-0 z-0 pointer-events-none" aria-hidden="true">
      <div class="absolute top-1/4 right-1/4 w-[400px] h-[400px] bg-purple-500/10 rounded-full blur-[120px]"></div>
      <div class="absolute bottom-1/3 left-1/4 w-[300px] h-[300px] bg-[#a855f7]/5 rounded-full blur-[100px]"></div>
    </div>

    <div class="container mx-auto px-4 relative z-10 max-w-7xl">
      <!-- Breadcrumb -->
      <nav class="mb-4 sm:mb-6 font-mono text-xs sm:text-sm flex flex-wrap items-center gap-1" dir="rtl">
        <a href="/" class="text-[#b0b0c0] hover:text-[#a855f7] transition-colors shrink-0">בית</a>
        <span class="text-[#b0b0c0]/50">/</span>
        <a href="/ai-news" class="text-[#b0b0c0] hover:text-[#a855f7] transition-colors shrink-0"><bdi>חדשות AI</bdi></a>
        <span class="text-[#b0b0c0]/50 hidden sm:inline">/</span>
        <span class="text-[#a855f7] truncate hidden sm:inline max-w-[200px] md:max-w-none"><bdi>{post.data.title.length > 40 ? post.data.title.slice(0, 40) + '...' : post.data.title}</bdi></span>
      </nav>

      <!-- Two Column Layout -->
      <div class="grid lg:grid-cols-[1fr_320px] gap-12 items-start">

        <!-- ============ MAIN CONTENT COLUMN ============ -->
        <div class="min-w-0">
          <!-- Article Header -->
          <header class="mb-10">
            <!-- Tags -->
            {post.data.tags && post.data.tags.length > 0 && (
              <div class="flex flex-wrap gap-2 mb-5" dir="ltr">
                {post.data.tags.map((tag: string) => (
                  <span class="px-3 py-1 bg-[#a855f7]/10 text-[#a855f7] text-xs font-mono rounded-full">
                    #{tag}
                  </span>
                ))}
              </div>
            )}

            <!-- Title -->
            <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black text-white mb-4 sm:mb-6 leading-[1.25]">
              {post.data.title}
            </h1>

            <!-- Description -->
            <p class="text-base sm:text-lg md:text-xl text-[#d0d0e0]/80 mb-5 sm:mb-8 leading-relaxed">
              {post.data.description}
            </p>

            <!-- Meta Bar -->
            <div class="flex flex-wrap items-center gap-3 sm:gap-5 text-xs sm:text-sm text-[#b0b0c0] pb-4 sm:pb-6 border-b border-white/[0.08]">
              <!-- Author -->
              {post.data.author && (
                <div class="flex items-center gap-2">
                  <div class="w-6 h-6 sm:w-8 sm:h-8 rounded-full bg-[#a855f7]/20 flex items-center justify-center">
                    <svg class="w-3 h-3 sm:w-4 sm:h-4 text-[#a855f7]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                    </svg>
                  </div>
                  <span class="font-medium text-white">{post.data.author}</span>
                </div>
              )}

              <span class="text-white/20 hidden sm:inline">|</span>

              <!-- Date -->
              <time datetime={post.data.pubDate.toISOString()} class="flex items-center gap-1.5 sm:gap-2">
                <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4 text-[#a855f7]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                </svg>
                {formatDate(post.data.pubDate)}
              </time>

              <span class="text-white/20 hidden sm:inline">|</span>

              <!-- Reading Time -->
              <div class="flex items-center gap-1.5 sm:gap-2">
                <svg class="w-3.5 h-3.5 sm:w-4 sm:h-4 text-[#a855f7]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <span>{readingTime} דקות קריאה</span>
              </div>
            </div>
          </header>

          <!-- Article Content -->
          <div class="article-prose">
            <Content />
          </div>

          <!-- Share Section -->
          <div class="mt-8 sm:mt-12 pt-6 sm:pt-8 border-t border-white/[0.08]">
            <p class="font-mono text-[#a855f7] text-xs sm:text-sm mb-3 sm:mb-4 uppercase tracking-wider">שתפו את הכתבה</p>
            <div class="grid grid-cols-2 sm:flex sm:flex-wrap gap-2 sm:gap-3">
              <a
                href={`https://twitter.com/intent/tweet?text=${encodeURIComponent(post.data.title)}&url=${encodeURIComponent(pageUrl)}`}
                target="_blank"
                rel="noopener noreferrer"
                class="flex items-center gap-2 px-4 py-2.5 border border-white/[0.08] bg-white/[0.03] text-[#d0d0e0] hover:border-[#a855f7]/50 hover:text-[#a855f7] transition-all duration-300 rounded-xl text-sm"
              >
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                </svg>
                X
              </a>
              <a
                href={`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(pageUrl)}&title=${encodeURIComponent(post.data.title)}`}
                target="_blank"
                rel="noopener noreferrer"
                class="flex items-center gap-2 px-4 py-2.5 border border-white/[0.08] bg-white/[0.03] text-[#d0d0e0] hover:border-[#0A66C2]/50 hover:text-[#0A66C2] transition-all duration-300 rounded-xl text-sm"
              >
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                </svg>
                LinkedIn
              </a>
              <a
                href={`https://wa.me/?text=${encodeURIComponent(post.data.title + ' ' + pageUrl)}`}
                target="_blank"
                rel="noopener noreferrer"
                class="flex items-center gap-2 px-4 py-2.5 border border-white/[0.08] bg-white/[0.03] text-[#d0d0e0] hover:border-[#25D366]/50 hover:text-[#25D366] transition-all duration-300 rounded-xl text-sm"
              >
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                </svg>
                WhatsApp
              </a>
              <button
                id="copy-link-btn"
                class="flex items-center gap-2 px-4 py-2.5 border border-white/[0.08] bg-white/[0.03] text-[#d0d0e0] hover:border-[#a855f7]/50 hover:text-[#a855f7] transition-all duration-300 rounded-xl text-sm cursor-pointer"
              >
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
                </svg>
                <span id="copy-link-text">העתק קישור</span>
              </button>
            </div>
          </div>

          <!-- Contact Form -->
          <div class="mt-10 sm:mt-16 p-5 sm:p-8 md:p-10 border border-white/[0.08] bg-white/[0.03] backdrop-blur-xl rounded-2xl shadow-[0_8px_32px_rgba(0,0,0,0.3)]">
            <!-- Glass header -->
            <div class="flex items-center gap-3 mb-6">
              <span class="w-1.5 h-1.5 rounded-full bg-[#a855f7] animate-pulse"></span>
              <span class="font-mono text-xs text-[#b0b0c0]/60 uppercase tracking-wider">CONTACT_US</span>
            </div>

            <h3 class="text-xl sm:text-2xl font-black text-white mb-2">
              {ctaConfig.formTitle}
            </h3>
            <p class="text-sm sm:text-base text-[#d0d0e0]/70 mb-6 sm:mb-8">
              {ctaConfig.formDesc}
            </p>

            <form id="article-contact-form" class="space-y-5">
              <div class="grid sm:grid-cols-2 gap-5">
                <!-- Name -->
                <div>
                  <label for="article-name" class="block text-sm text-[#b0b0c0] mb-2">שם מלא *</label>
                  <input
                    type="text"
                    id="article-name"
                    name="name"
                    required
                    class="w-full px-4 py-3 bg-[#0a0a0f] border border-[#a855f7]/15 text-[#f5f5fa] text-base shadow-[0_0_8px_rgba(168,85,247,0.04)] focus:outline-none focus:border-[#a855f7]/50 focus:shadow-[0_0_20px_rgba(168,85,247,0.15),0_0_40px_rgba(168,85,247,0.06)] focus:bg-white/[0.04] transition-all duration-300 rounded-xl"
                    placeholder="הכניסו שם מלא"
                  />
                </div>

                <!-- Phone -->
                <div>
                  <label for="article-phone" class="block text-sm text-[#b0b0c0] mb-2">טלפון *</label>
                  <input
                    type="tel"
                    id="article-phone"
                    name="phone"
                    required
                    class="w-full px-4 py-3 bg-[#0a0a0f] border border-[#a855f7]/15 text-[#f5f5fa] text-base shadow-[0_0_8px_rgba(168,85,247,0.04)] focus:outline-none focus:border-[#a855f7]/50 focus:shadow-[0_0_20px_rgba(168,85,247,0.15),0_0_40px_rgba(168,85,247,0.06)] focus:bg-white/[0.04] transition-all duration-300 rounded-xl"
                    placeholder="050-000-0000"
                  />
                </div>
              </div>

              <!-- Email -->
              <div>
                <label for="article-email" class="block text-sm text-[#b0b0c0] mb-2">אימייל</label>
                <input
                  type="email"
                  id="article-email"
                  name="email"
                  class="w-full px-4 py-3 bg-[#0a0a0f] border border-[#a855f7]/15 text-[#f5f5fa] text-base shadow-[0_0_8px_rgba(168,85,247,0.04)] focus:outline-none focus:border-[#a855f7]/50 focus:shadow-[0_0_20px_rgba(168,85,247,0.15),0_0_40px_rgba(168,85,247,0.06)] focus:bg-white/[0.04] transition-all duration-300 rounded-xl"
                  placeholder="email@example.com"
                />
              </div>

              <!-- Message -->
              <div>
                <label for="article-message" class="block text-sm text-[#b0b0c0] mb-2">ספרו לנו קצת</label>
                <textarea
                  id="article-message"
                  name="message"
                  rows="3"
                  class="w-full px-4 py-3 bg-[#0a0a0f] border border-[#a855f7]/15 text-[#f5f5fa] text-base shadow-[0_0_8px_rgba(168,85,247,0.04)] focus:outline-none focus:border-[#a855f7]/50 focus:shadow-[0_0_20px_rgba(168,85,247,0.15),0_0_40px_rgba(168,85,247,0.06)] focus:bg-white/[0.04] transition-all duration-300 resize-none rounded-xl"
                  placeholder={ctaConfig.formPlaceholder}
                ></textarea>
              </div>

              <!-- Privacy -->
              <div class="flex items-start gap-2 text-right">
                <input type="checkbox" id="article-privacy" name="privacy" required class="mt-1 accent-[#a855f7]"/>
                <label for="article-privacy" class="text-xs text-white/50">
                  קראתי ואני מסכים/ה ל<a href="/terms" class="text-[#a855f7] underline">תנאי השימוש</a> ול<a href="/privacy-policy" class="text-[#a855f7] underline">מדיניות הפרטיות</a>. *
                </label>
              </div>
              <div class="flex items-start gap-2 text-right">
                <input type="checkbox" id="article-marketing" name="marketing" class="mt-1 accent-[#a855f7]"/>
                <label for="article-marketing" class="text-xs text-white/50">
                  אני מסכים/ה לקבל עדכונים ותוכן שיווקי בנושאי AI. ניתן לבטל בכל עת.
                </label>
              </div>

              <!-- Submit -->
              <button
                type="submit"
                class="w-full py-3.5 bg-[#a855f7] text-[#0a0a0f] font-bold text-sm shadow-[0_4px_20px_rgba(168,85,247,0.25),0_0_30px_rgba(168,85,247,0.1)] hover:shadow-[0_8px_32px_rgba(168,85,247,0.4),0_0_50px_rgba(168,85,247,0.15)] hover:brightness-110 active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-2 rounded-full"
              >
                <span class="w-1.5 h-1.5 rounded-full bg-[#0a0a0f] animate-pulse"></span>
                רוצה לשמוע פרטים
              </button>
            </form>

            <!-- Success Message (hidden by default) -->
            <div id="article-form-success" class="hidden text-center py-8">
              <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-emerald-500/20 flex items-center justify-center">
                <svg class="w-8 h-8 text-emerald-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
              </div>
              <h4 class="text-xl font-bold text-white mb-2">תודה רבה!</h4>
              <p class="text-[#d0d0e0]">קיבלנו את הפרטים שלכם. ניצור קשר בהקדם.</p>
            </div>

            <!-- Dynamic CTA link -->
            <div class="mt-6 pt-6 border-t border-white/[0.06] text-center">
              <p class="text-sm text-[#b0b0c0] mb-3">רוצים לדעת עוד?</p>
              <a
                href={ctaConfig.linkHref}
                class="inline-flex items-center gap-2 text-[#a855f7] font-bold text-sm hover:gap-3 transition-all"
              >
                {ctaConfig.linkText}
                <svg class="w-4 h-4 rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                </svg>
              </a>
            </div>
          </div>

          <!-- Back to Blog -->
          <div class="mt-10">
            <a
              href="/ai-news"
              class="inline-flex items-center gap-2 text-[#a855f7] font-mono text-sm hover:gap-3 transition-all"
            >
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
              חזרה לחדשות AI
            </a>
          </div>
        </div>

        <!-- ============ SIDEBAR ============ -->
        <aside class="lg:sticky lg:top-24 lg:self-start space-y-8">

          <!-- Social Follow Box -->
          <div class="p-6 border border-white/[0.08] bg-white/[0.03] backdrop-blur-xl rounded-2xl">
            <div class="flex items-center gap-3 mb-5">
              <span class="w-1.5 h-1.5 rounded-full bg-[#a855f7] animate-pulse"></span>
              <span class="font-mono text-xs text-[#b0b0c0]/60 uppercase tracking-wider">FOLLOW_US</span>
            </div>
            <p class="text-white font-bold mb-4">עקבו אחרינו</p>
            <div class="grid grid-cols-2 gap-3">
              {socialFollowLinks.map(social => (
                <a
                  href={social.href}
                  target="_blank"
                  rel="noopener noreferrer"
                  class="flex items-center gap-2 px-3 py-2.5 border border-white/[0.08] bg-white/[0.03] rounded-xl text-[#d0d0e0] hover:border-[#a855f7]/30 hover:text-white transition-all duration-300 text-xs"
                >
                  {social.icon === 'instagram' && (
                    <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 24 24" style={`color: ${social.color}`}>
                      <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/>
                    </svg>
                  )}
                  {social.icon === 'facebook' && (
                    <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 24 24" style={`color: ${social.color}`}>
                      <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                    </svg>
                  )}
                  {social.icon === 'tiktok' && (
                    <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 24 24" style={`color: ${social.color}`}>
                      <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
                    </svg>
                  )}
                  {social.icon === 'whatsapp' && (
                    <svg class="w-4 h-4 shrink-0" fill="currentColor" viewBox="0 0 24 24" style={`color: ${social.color}`}>
                      <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/>
                    </svg>
                  )}
                  <span>{social.label}</span>
                </a>
              ))}
            </div>
          </div>

          <!-- Related / Latest Articles -->
          {sidebarPosts.length > 0 && (
            <div class="p-6 border border-white/[0.08] bg-white/[0.03] backdrop-blur-xl rounded-2xl">
              <div class="flex items-center gap-3 mb-5">
                <span class="w-1.5 h-1.5 rounded-full bg-[#a855f7] animate-pulse"></span>
                <span class="font-mono text-xs text-[#b0b0c0]/60 uppercase tracking-wider">MORE_ARTICLES</span>
              </div>
              <p class="text-white font-bold mb-4">{relatedPosts.length >= 2 ? 'כתבות קשורות' : 'כתבות אחרונות'}</p>
              <div class="space-y-4">
                {sidebarPosts.map(sp => (
                  <a href={`/ai-news/${sp.id}`} class="group block">
                    <div class="flex gap-3">
                      {sp.data.heroImage && (
                        <img
                          src={sp.data.heroImage.replace(/w_\d+/, 'w_120')}
                          alt={sp.data.title}
                          class="w-20 h-14 object-cover rounded-lg shrink-0"
                          loading="lazy"
                        />
                      )}
                      <div class="min-w-0">
                        <h4 class="text-sm text-[#d0d0e0] group-hover:text-[#a855f7] transition-colors line-clamp-2 leading-snug font-medium">
                          {sp.data.title}
                        </h4>
                        <time class="text-xs text-[#b0b0c0]/60 mt-1 block">
                          {formatDate(sp.data.pubDate)}
                        </time>
                      </div>
                    </div>
                  </a>
                ))}
              </div>
            </div>
          )}

          <!-- Academy CTA -->
          <div class="p-6 border border-[#a855f7]/20 bg-[#a855f7]/5 backdrop-blur-xl rounded-2xl">
            <div class="flex items-center gap-3 mb-4">
              <span class="w-1.5 h-1.5 rounded-full bg-[#a855f7] animate-pulse"></span>
              <span class="font-mono text-xs text-[#a855f7] uppercase tracking-wider">ACADEMY</span>
            </div>
            <h4 class="text-lg font-bold text-white mb-2">רוצים ללמוד AI?</h4>
            <p class="text-sm text-[#d0d0e0]/70 mb-5 leading-relaxed">
              ההכשרות שלנו מלמדות כלים מעשיים שתוכלו ליישם כבר מחר בעבודה.
            </p>
            <a
              href="/academy"
              class="block w-full py-3 bg-[#a855f7] text-[#0a0a0f] font-bold text-sm text-center hover:shadow-[0_0_20px_rgba(168,85,247,0.4)] hover:brightness-110 transition-all duration-300 rounded-full"
            >
              <bdi>Bot-Camp</bdi> - הכשרה מקצועית
            </a>
          </div>

          <!-- Services CTA -->
          <div class="p-6 border border-white/[0.08] bg-white/[0.03] backdrop-blur-xl rounded-2xl">
            <h4 class="text-lg font-bold text-white mb-2">צריכים אוטומציה?</h4>
            <p class="text-sm text-[#d0d0e0]/70 mb-5 leading-relaxed">
              סוכני AI, בוטים, ואוטומציות - מותאמים בדיוק לעסק שלכם.
            </p>
            <a
              href="/ai-agents"
              class="block w-full py-3 border border-white/[0.15] text-white font-bold text-sm text-center hover:border-[#a855f7]/30 hover:text-[#a855f7] transition-all duration-300 rounded-full"
            >
              שירותי AI לעסקים
            </a>
          </div>
        </aside>
      </div>
    </div>
  </article>

  <!-- Related Posts - Full Width -->
  {sidebarPosts.length > 0 && (
    <section class="relative py-10 sm:py-16 bg-[#0d0d12]">
      <div class="container mx-auto px-4 max-w-7xl">
        <header class="text-center mb-8 sm:mb-10">
          <p class="font-mono text-[#a855f7] text-xs sm:text-sm mb-2 uppercase tracking-wider">עוד כתבות שיעניינו אתכם</p>
          <h2 class="text-xl sm:text-2xl md:text-3xl font-black">
            כתבות <span class="text-[#a855f7]">נוספות</span>
          </h2>
        </header>

        <div class="grid grid-cols-2 sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-6">
          {sidebarPosts.map((relatedPost) => (
            <article
              class="group relative border border-white/[0.08] bg-white/[0.03] backdrop-blur-xl hover:border-[#a855f7]/30 transition-all duration-300 overflow-hidden rounded-2xl"
            >
              {relatedPost.data.heroImage && (
                <div class="relative h-24 sm:h-36 overflow-hidden">
                  <img
                    src={relatedPost.data.heroImage.replace(/w_\d+/, 'w_400')}
                    alt={relatedPost.data.title}
                    class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-105"
                    loading="lazy"
                  />
                  <div class="absolute inset-0 bg-gradient-to-t from-[#12121a] to-transparent"></div>
                </div>
              )}
              <div class="p-3 sm:p-5">
                <h3 class="text-sm sm:text-base font-bold text-white mb-1 sm:mb-2 group-hover:text-[#a855f7] transition-colors line-clamp-2">
                  <a href={`/ai-news/${relatedPost.id}`}>
                    {relatedPost.data.title}
                  </a>
                </h3>
                <p class="text-[#d0d0e0]/70 text-xs sm:text-sm line-clamp-2 mb-2 sm:mb-3 hidden sm:block">
                  {relatedPost.data.description}
                </p>
                <time class="text-xs font-mono text-[#b0b0c0]/50">
                  {formatDate(relatedPost.data.pubDate)}
                </time>
              </div>
            </article>
          ))}
        </div>
      </div>
    </section>
  )}

  <Footer slot="footer" />
</BaseLayout>

<script define:vars={{ webhookUrl, pageUrl, ctaFormSource: ctaConfig.formSource, ctaFormInterest: ctaConfig.formInterest }}>
  // Contact form handler
  const form = document.getElementById('article-contact-form');
  const successMsg = document.getElementById('article-form-success');

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const submitBtn = form.querySelector('button[type="submit"]');
    const originalText = submitBtn?.textContent || '';
    if (submitBtn) { submitBtn.disabled = true; submitBtn.textContent = 'שולח...'; }

    const formData = new FormData(form);
    const params = new URLSearchParams();
    params.append('source', ctaFormSource);
    params.append('article_url', pageUrl);
    params.append('interest', ctaFormInterest);
    formData.forEach((value, key) => {
      if (key !== 'privacy') {
        params.append(key, value.toString());
      }
    });

    try {
      await fetch(webhookUrl, { method: 'POST', body: params });
      if (typeof fbq === 'function') fbq('track', 'Lead');
      form.style.display = 'none';
      if (successMsg) successMsg.classList.remove('hidden');
    } catch {
      if (submitBtn) { submitBtn.disabled = false; submitBtn.textContent = originalText; }
      alert('שגיאה בשליחת הטופס. אנא נסו שנית.');
    }
  });

  // Copy link button
  const copyBtn = document.getElementById('copy-link-btn');
  const copyText = document.getElementById('copy-link-text');
  copyBtn?.addEventListener('click', async () => {
    try {
      await navigator.clipboard.writeText(pageUrl);
      if (copyText) {
        copyText.textContent = 'הקישור הועתק!';
        setTimeout(() => { copyText.textContent = 'העתק קישור'; }, 2000);
      }
    } catch {}
  });
</script>

<style is:global>
  /* Article prose styling - mobile-first */
  .article-prose {
    color: #d0d0e0;
    font-size: 1rem;
    line-height: 1.8;
  }

  @media (min-width: 768px) {
    .article-prose {
      font-size: 1.125rem;
      line-height: 1.9;
    }
  }

  .article-prose h2 {
    color: white;
    font-size: 1.4rem;
    font-weight: 900;
    margin-top: 2.25rem;
    margin-bottom: 1rem;
    padding-bottom: 0.6rem;
    border-bottom: 2px solid rgba(168, 85, 247, 0.25);
    letter-spacing: -0.01em;
  }

  @media (min-width: 768px) {
    .article-prose h2 {
      font-size: 2.25rem;
      margin-top: 3rem;
      margin-bottom: 1.25rem;
      padding-bottom: 0.75rem;
    }
  }

  .article-prose h3 {
    color: white;
    font-size: 1.2rem;
    font-weight: 800;
    margin-top: 2rem;
    margin-bottom: 0.75rem;
  }

  @media (min-width: 768px) {
    .article-prose h3 {
      font-size: 1.65rem;
      margin-top: 2.5rem;
      margin-bottom: 1rem;
    }
  }

  .article-prose p {
    margin-bottom: 1.25rem;
  }

  @media (min-width: 768px) {
    .article-prose p {
      margin-bottom: 1.75rem;
    }
  }

  .article-prose > *:first-child {
    margin-top: 0;
  }

  .article-prose a {
    color: #a855f7;
    text-decoration: none;
    border-bottom: 1px solid rgba(168, 85, 247, 0.3);
    transition: border-color 0.2s;
  }

  .article-prose a:hover {
    border-bottom-color: #a855f7;
  }

  .article-prose strong {
    color: white;
    font-weight: 700;
  }

  .article-prose ul, .article-prose ol {
    margin-bottom: 1.25rem;
    padding-right: 1.25rem;
  }

  @media (min-width: 768px) {
    .article-prose ul, .article-prose ol {
      margin-bottom: 1.5rem;
      padding-right: 1.5rem;
    }
  }

  .article-prose li {
    margin-bottom: 0.5rem;
  }

  .article-prose li::marker {
    color: #a855f7;
  }

  .article-prose code {
    background: rgba(168, 85, 247, 0.1);
    padding: 0.15rem 0.4rem;
    border-radius: 6px;
    font-size: 0.85em;
    color: #c084fc;
    font-family: 'Rubik', system-ui, sans-serif;
    word-break: break-word;
  }

  .article-prose pre {
    background: #12121a;
    border: 1px solid rgba(255, 255, 255, 0.08);
    padding: 1rem;
    border-radius: 12px;
    overflow-x: auto;
    margin-bottom: 1.5rem;
    font-size: 0.85rem;
    -webkit-overflow-scrolling: touch;
  }

  @media (min-width: 768px) {
    .article-prose pre {
      padding: 1.25rem;
      font-size: 0.9rem;
    }
  }

  .article-prose pre code {
    background: transparent;
    padding: 0;
    color: #d0d0e0;
    word-break: normal;
  }

  .article-prose blockquote {
    border-right: 3px solid #a855f7;
    padding: 0.75rem 1rem;
    margin: 1.25rem 0;
    background: rgba(168, 85, 247, 0.05);
    border-radius: 0 12px 12px 0;
    font-style: italic;
    color: #b0b0c0;
  }

  @media (min-width: 768px) {
    .article-prose blockquote {
      padding: 1rem 1.5rem;
      margin: 1.5rem 0;
    }
  }

  .article-prose img {
    border-radius: 12px;
    margin: 1.5rem 0;
    border: 1px solid rgba(255, 255, 255, 0.08);
    max-width: 100%;
    height: auto;
  }

  @media (min-width: 768px) {
    .article-prose img {
      margin: 2rem 0;
    }
  }

  /* Table wrapper for horizontal scroll on mobile */
  .article-prose table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.25rem 0;
    font-size: 0.8rem;
    display: block;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
  }

  @media (min-width: 768px) {
    .article-prose table {
      margin: 1.5rem 0;
      font-size: 0.95rem;
      display: table;
    }
  }

  .article-prose tbody tr:nth-child(even) td {
    background: rgba(168, 85, 247, 0.02);
  }

  .article-prose th {
    background: rgba(168, 85, 247, 0.1);
    color: white;
    font-weight: 700;
    padding: 0.5rem 0.75rem;
    text-align: right;
    border-bottom: 2px solid rgba(168, 85, 247, 0.3);
    white-space: nowrap;
  }

  @media (min-width: 768px) {
    .article-prose th {
      padding: 0.75rem 1rem;
    }
  }

  .article-prose td {
    padding: 0.5rem 0.75rem;
    border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  }

  @media (min-width: 768px) {
    .article-prose td {
      padding: 0.75rem 1rem;
    }
  }

  .article-prose tr:hover td {
    background: rgba(168, 85, 247, 0.03);
  }

  .article-prose hr {
    border: none;
    border-top: 1px solid rgba(255, 255, 255, 0.08);
    margin: 1.5rem 0;
  }

  @media (min-width: 768px) {
    .article-prose hr {
      margin: 2rem 0;
    }
  }

  /* Blog CTA Banner - glassmorphism card */
  .article-prose .blog-cta-banner {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    margin: 2.5rem 0;
    padding: 2.5rem 1.5rem 2rem;
    border-radius: 16px;
    overflow: hidden;
    background: rgba(255, 255, 255, 0.03);
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
    transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    text-decoration: none;
    color: inherit;
    position: relative;
  }

  .article-prose .blog-cta-banner::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, #a855f7, transparent);
    opacity: 0.6;
  }

  .article-prose .blog-cta-banner::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 16px;
    background: radial-gradient(ellipse at 50% 0%, rgba(168, 85, 247, 0.08) 0%, transparent 60%);
    pointer-events: none;
  }

  .article-prose .blog-cta-banner:hover {
    border-color: rgba(168, 85, 247, 0.35);
    box-shadow:
      0 16px 48px rgba(0, 0, 0, 0.4),
      0 0 40px rgba(168, 85, 247, 0.1);
    transform: translateY(-3px);
  }

  .article-prose .blog-cta-banner:hover::before {
    opacity: 1;
  }

  .article-prose .blog-cta-banner .cta-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: rgba(168, 85, 247, 0.08);
    border: 1px solid rgba(168, 85, 247, 0.2);
    border-radius: 999px;
    padding: 5px 16px;
    margin-bottom: 1.25rem;
    font-size: 0.7rem;
    font-family: 'Rubik', system-ui, sans-serif;
    color: #c084fc;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    position: relative;
    z-index: 1;
  }

  .article-prose .blog-cta-banner .cta-badge::before {
    content: '';
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: #a855f7;
    box-shadow: 0 0 8px #a855f7;
    animation: pulse 2s infinite;
  }

  .article-prose .blog-cta-banner .cta-title {
    font-size: 1.5rem;
    font-weight: 900;
    color: #f5f5fa;
    margin-bottom: 0.75rem;
    line-height: 1.3;
    position: relative;
    z-index: 1;
  }

  .article-prose .blog-cta-banner .cta-desc {
    font-size: 0.9rem;
    color: #9090a8;
    margin-bottom: 1.5rem;
    line-height: 1.7;
    max-width: 520px;
    position: relative;
    z-index: 1;
  }

  .article-prose .blog-cta-banner .cta-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    justify-content: center;
    margin-bottom: 1.5rem;
    position: relative;
    z-index: 1;
  }

  .article-prose .blog-cta-banner .cta-tag {
    font-size: 0.7rem;
    font-family: 'Rubik', system-ui, sans-serif;
    color: #b0b0c0;
    background: rgba(255, 255, 255, 0.04);
    border: 1px solid rgba(255, 255, 255, 0.06);
    border-radius: 6px;
    padding: 4px 10px;
    letter-spacing: 0.05em;
  }

  .article-prose .blog-cta-banner .cta-button {
    display: inline-flex;
    align-items: center;
    background: linear-gradient(135deg, #a855f7, #7c3aed);
    color: #fff;
    font-weight: 700;
    font-size: 0.9rem;
    padding: 12px 32px;
    border-radius: 12px;
    transition: all 0.3s;
    box-shadow: 0 4px 20px rgba(168, 85, 247, 0.3);
    position: relative;
    z-index: 1;
  }

  .article-prose .blog-cta-banner:hover .cta-button {
    box-shadow: 0 8px 28px rgba(168, 85, 247, 0.5);
  }

  @media (min-width: 768px) {
    .article-prose .blog-cta-banner {
      margin: 3rem 0;
      padding: 3rem 3rem 2.5rem;
      border-radius: 20px;
    }

    .article-prose .blog-cta-banner::after {
      border-radius: 20px;
    }

    .article-prose .blog-cta-banner .cta-title {
      font-size: 1.8rem;
    }

    .article-prose .blog-cta-banner .cta-desc {
      font-size: 0.95rem;
    }
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
