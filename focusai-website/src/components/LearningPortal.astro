---
/**
 * Learning Portal Section - Showcase the AI-powered learning portal
 * Two stacked card images on one side, feature grid on the other
 * Supports dark (homepage) and light (bot-camp) themes
 */

interface Props {
  theme?: 'dark' | 'light';
}

const { theme = 'dark' } = Astro.props;
const isLight = theme === 'light';

const features = [
  { icon: 'sparkle', title: 'סיכומי AI חכמים', desc: 'סיכום אוטומטי של כל שיעור, כולל תשובות לשאלות' },
  { icon: 'bot', title: 'סוכן AI אישי', desc: 'שאלו כל שאלה - הסוכן יענה ויפנה לסעיפים הרלוונטיים' },
  { icon: 'tasks', title: 'מטלות אינטראקטיביות', desc: 'ליווי צעד אחר צעד בהכנת שיעורי הבית' },
  { icon: 'book', title: 'מדריכים מקצועיים', desc: 'מדריכים מעמיקים לכל נושא שנלמד' },
  { icon: 'play', title: 'Playground לתרגול', desc: 'ממשקי תרגול אינטראקטיביים לחידוד מיומנויות' },
  { icon: 'agents', title: 'סוכני AI מקצועיים', desc: 'סוכנים חכמים לסיוע בתחומים שונים' },
  { icon: 'slides', title: 'מצגות השיעורים', desc: 'גישה מלאה לכל המצגות שהועברו' },
  { icon: 'grid', title: 'מרכז כלי AI', desc: 'כל הכלים שלמדנו, מסווגים לפי שימוש' },
];

const imgLesson = 'https://res.cloudinary.com/dfudxxzlj/image/upload/q_auto,f_auto,w_800,ar_16:10,c_fill,g_north/v1771625565/WhatsApp_Image_2026-02-21_at_00.10.59_um7mqm.jpg';
const imgPortal = 'https://res.cloudinary.com/dfudxxzlj/image/upload/q_auto,f_auto,w_800,ar_16:10,c_fill,g_north/v1771625565/WhatsApp_Image_2026-02-21_at_00.11.54_byd8nf.jpg';
---

<section class:list={[
  'py-16 md:py-24 relative overflow-hidden',
  isLight ? 'bg-gradient-to-b from-[#f8f4ff] to-white' : 'bg-[#0a0a0f]'
]} data-section>
  <!-- Background glow -->
  {!isLight && (
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-[#a855f7]/[0.04] rounded-full blur-[120px] pointer-events-none"></div>
  )}

  <div class="container px-4 relative z-10">
    <!-- Badge -->
    <div class="flex justify-center mb-6">
      <div class:list={[
        'inline-flex items-center gap-3 px-4 py-2 rounded-full',
        isLight
          ? 'bg-[#a855f7]/10 border border-[#a855f7]/20'
          : 'bg-white/[0.03] backdrop-blur-sm border border-white/[0.08]'
      ]}>
        <span class="w-1.5 h-1.5 rounded-full bg-[#a855f7] animate-pulse"></span>
        <span class:list={[
          'font-mono text-xs tracking-wider uppercase',
          isLight ? 'text-[#a855f7]' : 'text-[#a855f7]'
        ]}>LEARNING_PORTAL</span>
      </div>
    </div>

    <!-- Title -->
    <h2 class:list={[
      'text-3xl md:text-4xl lg:text-5xl font-black text-center mb-3',
      isLight ? 'text-[#1a1a2e]' : 'text-white'
    ]}>
      פורטל הלימוד שמלווה אתכם
      <span class="text-transparent bg-clip-text bg-gradient-to-r from-[#a855f7] to-[#c084fc]"> 24/7</span>
    </h2>
    <p class:list={[
      'text-center text-base md:text-lg mb-12 md:mb-16 max-w-2xl mx-auto',
      isLight ? 'text-[#4a4a6a]' : 'text-[#b0b0c0]'
    ]}>
      כל מה שצריך כדי ללמוד, לתרגל ולהתקדם - במקום אחד
    </p>

    <!-- Two Column Layout -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 lg:gap-16 items-center">

      <!-- Right side (RTL) = Text + Features -->
      <div class="order-2 lg:order-1">
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
          {features.map((f) => (
            <div class:list={[
              'group flex items-start gap-3 p-3 rounded-xl transition-all duration-300',
              isLight
                ? 'bg-white border border-[#e0d4f7] hover:border-[#a855f7]/40 hover:shadow-lg hover:shadow-[#a855f7]/5'
                : 'bg-white/[0.03] border border-white/[0.06] hover:border-[#a855f7]/30 hover:bg-white/[0.05]'
            ]}>
              <div class:list={[
                'shrink-0 w-9 h-9 rounded-lg flex items-center justify-center mt-0.5',
                isLight
                  ? 'bg-[#a855f7]/10'
                  : 'bg-[#a855f7]/10'
              ]}>
                {f.icon === 'sparkle' && (
                  <svg class="w-5 h-5 text-[#a855f7]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.455 2.456L21.75 6l-1.036.259a3.375 3.375 0 00-2.455 2.456z"/></svg>
                )}
                {f.icon === 'bot' && (
                  <svg class="w-5 h-5 text-[#a855f7]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8.625 9.75a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 01.778-.332 48.294 48.294 0 005.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"/></svg>
                )}
                {f.icon === 'tasks' && (
                  <svg class="w-5 h-5 text-[#a855f7]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                )}
                {f.icon === 'book' && (
                  <svg class="w-5 h-5 text-[#a855f7]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"/></svg>
                )}
                {f.icon === 'play' && (
                  <svg class="w-5 h-5 text-[#a855f7]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"/></svg>
                )}
                {f.icon === 'agents' && (
                  <svg class="w-5 h-5 text-[#a855f7]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 3.104v5.714a2.25 2.25 0 01-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 014.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0112 15a9.065 9.065 0 00-6.23.693L5 14.5m14.8.8l1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0112 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"/></svg>
                )}
                {f.icon === 'slides' && (
                  <svg class="w-5 h-5 text-[#a855f7]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5m.75-9l3-3 2.148 2.148A12.061 12.061 0 0116.5 7.605"/></svg>
                )}
                {f.icon === 'grid' && (
                  <svg class="w-5 h-5 text-[#a855f7]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z"/></svg>
                )}
              </div>
              <div>
                <h4 class:list={[
                  'text-sm font-bold mb-0.5',
                  isLight ? 'text-[#1a1a2e]' : 'text-white'
                ]}>{f.title}</h4>
                <p class:list={[
                  'text-xs leading-relaxed',
                  isLight ? 'text-[#6a6a8a]' : 'text-[#8a8aa0]'
                ]}>{f.desc}</p>
              </div>
            </div>
          ))}
        </div>
      </div>

      <!-- Left side (RTL) = Stacked Card Images -->
      <div class="order-1 lg:order-2 flex justify-center">
        <div class="portal-cards relative w-[320px] h-[230px] sm:w-[420px] sm:h-[300px] md:w-[500px] md:h-[350px]">
          <!-- Back card (portal homepage) -->
          <div class:list={[
            'portal-card-back absolute inset-0 rounded-2xl overflow-hidden transition-transform duration-500',
            isLight
              ? 'shadow-[0_12px_40px_rgba(168,85,247,0.15)] border-2 border-[#e0d4f7]'
              : 'shadow-[0_12px_40px_rgba(0,0,0,0.5)] border-2 border-white/[0.1]'
          ]}>
            <img
              src={imgPortal}
              alt="פורטל הלימוד של Focus AI"
              class="w-full h-full object-cover object-top"
              loading="lazy"
              decoding="async"
              width="800"
              height="500"
            />
          </div>
          <!-- Front card (lesson page) -->
          <div class:list={[
            'portal-card-front absolute inset-0 rounded-2xl overflow-hidden transition-transform duration-500',
            isLight
              ? 'shadow-[0_16px_48px_rgba(168,85,247,0.2)] border-2 border-[#a855f7]/30'
              : 'shadow-[0_16px_48px_rgba(168,85,247,0.15)] border-2 border-[#a855f7]/30'
          ]}>
            <img
              src={imgLesson}
              alt="סיכום שיעור עם AI"
              class="w-full h-full object-cover object-top"
              loading="lazy"
              decoding="async"
              width="800"
              height="500"
            />
          </div>
        </div>
      </div>

    </div>
  </div>
</section>

<style>
  .portal-card-back {
    transform: rotate(4deg) translate(18%, 18%);
    z-index: 1;
  }

  .portal-card-front {
    transform: rotate(-2deg) translate(-8%, -10%);
    z-index: 2;
  }

  .portal-cards:hover .portal-card-back {
    transform: rotate(6deg) translate(22%, 22%);
  }

  .portal-cards:hover .portal-card-front {
    transform: rotate(-4deg) translate(-12%, -14%);
  }

  @media (max-width: 640px) {
    .portal-card-back {
      transform: rotate(3deg) translate(14%, 14%);
    }
    .portal-card-front {
      transform: rotate(-1.5deg) translate(-6%, -8%);
    }
  }
</style>
