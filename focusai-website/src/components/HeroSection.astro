---
/**
 * HeroSection - Pure Astro + CSS (no React, no Framer Motion)
 * Saves ~308KB of JS (React 179KB + Framer Motion 129KB)
 */

// Brand assets
const chavobot = "https://res.cloudinary.com/dfudxxzlj/image/upload/q_auto,f_auto,w_650/v1771022344/36c7efb5-d099-4cb1-94fe-1bd896f53cef_ivfe4n.png";
const chavobotMobile = "https://res.cloudinary.com/dfudxxzlj/image/upload/q_auto,f_auto,w_420/v1771022344/36c7efb5-d099-4cb1-94fe-1bd896f53cef_ivfe4n.png";
const fingerprint = "https://res.cloudinary.com/dfudxxzlj/image/upload/q_auto,f_auto,w_400/v1765571815/FOCUS_LOGO-06_2_grkja9.png";
const n8nBadge = "https://res.cloudinary.com/dfudxxzlj/image/upload/q_auto,f_auto,w_300/v1770414664/f4b939e2-bcbe-4c98-adff-db93933b12e3_bhhw3i.png";

// Generate particles server-side
const particles = Array.from({ length: 12 }, (_, i) => ({
  id: i,
  char: ['0', '1', '>', '<', '/', '*', '#', '@'][i % 8],
  x: (i * 37 + 13) % 100, // deterministic spread
  y: (i * 29 + 7) % 100,
  duration: (i % 5) + 6,  // 6-10s
  delay: (i * 1.2) % 5,   // 0-5s stagger
  size: (i % 4) + 13,     // 13-16px
}));
---

<section id="hero" class="hero-section relative min-h-screen bg-[#0a0a0f]">
  <!-- Background layers -->
  <div class="absolute inset-0">
    <div class="absolute top-0 left-0 w-1/2 h-1/2 bg-[#a855f7]/8 rounded-full blur-[200px]"></div>
    <div class="absolute bottom-0 right-0 w-1/2 h-1/2 bg-[#7c3aed]/8 rounded-full blur-[200px]"></div>
    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-1/3 h-1/3 bg-[#c084fc]/5 rounded-full blur-[150px]"></div>
  </div>

  <!-- Floating Data Particles (CSS-only animation) -->
  <div class="absolute inset-0 overflow-hidden pointer-events-none" aria-hidden="true">
    {particles.map((p) => (
      <span
        class="hero-particle absolute font-mono text-white/40"
        style={`left:${p.x}%;top:${p.y}%;font-size:${p.size}px;animation-duration:${p.duration}s;animation-delay:${p.delay}s;text-shadow:0 0 8px rgba(168,85,247,0.6),0 0 20px rgba(168,85,247,0.3)`}
      >
        {p.char}
      </span>
    ))}
  </div>

  <!-- Terminal prompt - typewriter effect -->
  <div class="hero-animate hero-delay-2 absolute top-20 md:top-24 left-0 right-0 z-30">
    <div class="container max-w-6xl mx-auto px-4 md:px-8">
      <span class="font-mono text-[#a855f7] text-sm md:text-base lg:text-lg">
        <span class="text-[#9090a8]">&gt;</span>{" "}
        <span id="typewriter-text"></span>
        <span class="hero-blink">_</span>
      </span>
    </div>
  </div>

  <!-- Main content -->
  <div class="hero-main relative z-10 container min-h-screen flex items-center px-4 md:px-8 pt-20 md:pt-24">
    <div class="w-full py-12 lg:py-0">
      <div class="grid lg:grid-cols-2 gap-8 lg:gap-12 items-center max-w-6xl mx-auto">

        <!-- Text Content -->
        <div class="text-center lg:text-right order-2 lg:order-1 relative px-4">
          <!-- Fingerprint behind text -->
          <img
            src={fingerprint}
            alt=""
            aria-hidden="true"
            loading="lazy"
            decoding="async"
            class="hero-fingerprint absolute top-1/2 right-[-30%] lg:right-[-35%] w-[600px] lg:w-[800px] h-auto pointer-events-none select-none -z-10"
            style="transform: translateY(-50%)"
          />

          <!-- Main Headline -->
          <div class="hero-animate hero-delay-1 mb-2">
            <h1 class="text-[clamp(2.75rem,8vw,8rem)] font-black leading-[0.95] tracking-tighter whitespace-nowrap">
              <span class="text-[#f5f5fa]">Focus</span>
              <span
                class="text-transparent bg-clip-text mr-4"
                style="background-image: linear-gradient(90deg, #a855f7, #c084fc, #e879f9)"
              >AI</span>
            </h1>
            <p class="text-lg md:text-xl font-mono text-[#9090a8]/70 tracking-widest mt-2">Your AI Partner</p>
          </div>

          <!-- Subtitle -->
          <div class="hero-animate hero-delay-2 mb-8 overflow-hidden">
            <h2 class="text-[clamp(1.75rem,4vw,3.5rem)] font-bold leading-tight">
              <span class="text-[#f5f5fa]">מחברים אנשים </span>
              <span
                class="text-transparent bg-clip-text"
                style="background-image: linear-gradient(90deg, #a855f7, #c084fc, #e879f9)"
              >וטכנולוגיה</span>
            </h2>
          </div>

          <!-- Description -->
          <div class="hero-animate hero-delay-3 mb-10">
            <p class="text-xl md:text-2xl text-[#f5f5fa] mb-2 font-semibold">
              אצלנו הפוקוס הוא עלייך.
            </p>
            <p class="text-lg md:text-xl text-[#9090a8] font-mono">
              // הכשרות מקצועיות ופתרונות AI לעסקים
            </p>
          </div>

          <!-- CTA Buttons -->
          <div class="hero-animate hero-delay-4 flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
            <a
              href="/academy"
              class="hero-btn-primary relative inline-flex items-center justify-center gap-3 px-10 py-4 font-bold text-lg tracking-wide rounded-full bg-[#a855f7] text-white transition-all duration-200 hover:bg-[#9333ea] focus:outline-none focus:ring-2 focus:ring-[#a855f7] focus:ring-offset-2 focus:ring-offset-[#0a0a0f]"
            >
              אקדמיה
            </a>
            <a
              href="/ai-agents"
              class="hero-btn-secondary relative inline-flex items-center justify-center gap-3 px-10 py-4 font-bold text-lg tracking-wide rounded-full bg-transparent text-[#a855f7] border-2 border-[#a855f7] transition-all duration-200 hover:bg-[#a855f7]/15 focus:outline-none focus:ring-2 focus:ring-[#a855f7] focus:ring-offset-2 focus:ring-offset-[#0a0a0f]"
            >
              פיתוח מערכות
            </a>
          </div>
        </div>

        <!-- Chavobot + n8n Badge -->
        <div class="hero-animate hero-delay-2 hero-scale order-1 lg:order-2 flex justify-center items-center lg:-translate-x-8">
          <div class="relative">
            <!-- Main image - responsive: 420px mobile, 800px desktop -->
            <img
              src={chavobotMobile}
              srcset={`${chavobotMobile} 420w, ${chavobot} 800w`}
              sizes="(max-width: 640px) 420px, 800px"
              alt="חבובוט - הנציג החכם של Focus AI"
              fetchpriority="high"
              decoding="async"
              width="800"
              height="800"
              class="relative z-10 w-[90vw] max-w-[420px] sm:max-w-[520px] md:max-w-[600px] lg:max-w-[700px] h-auto"
              style="mask-image: linear-gradient(to bottom, transparent 0%, black 8%, black 92%, transparent 100%); -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 8%, black 92%, transparent 100%)"
            />
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Entrance animations */
  .hero-animate {
    opacity: 0;
    transform: translateY(40px);
    animation: heroFadeUp 0.8s ease-out forwards;
  }

  .hero-scale {
    transform: translateY(0) scale(0.95);
    animation: heroScaleUp 1.2s ease-out forwards;
  }

  .hero-delay-1 { animation-delay: 0.3s; }
  .hero-delay-2 { animation-delay: 0.5s; }
  .hero-delay-3 { animation-delay: 0.7s; }
  .hero-delay-4 { animation-delay: 0.9s; }

  @keyframes heroFadeUp {
    from { opacity: 0; transform: translateY(40px); }
    to   { opacity: 1; transform: translateY(0); }
  }

  @keyframes heroScaleUp {
    from { opacity: 0; transform: scale(0.95); }
    to   { opacity: 1; transform: scale(1); }
  }

  /* Fingerprint fade-in - override global mobile hide rule */
  .hero-fingerprint {
    opacity: 0;
    animation: heroFadeIn 2s ease-out 1s forwards;
    display: block !important;
  }

  @keyframes heroFadeIn {
    from { opacity: 0; }
    to   { opacity: 0.15; }
  }

  /* Cursor blink */
  .hero-blink {
    animation: heroBlink 1s step-end infinite;
  }

  @keyframes heroBlink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }

  /* Floating particles */
  .hero-particle {
    animation: heroFloat linear infinite;
    opacity: 0;
  }

  @keyframes heroFloat {
    0%   { transform: translateY(0); opacity: 0; }
    15%  { opacity: 0.5; }
    85%  { opacity: 0.5; }
    100% { transform: translateY(-200px); opacity: 0; }
  }

  /* Button effects */
  .hero-btn-primary {
    box-shadow: 0 0 25px rgba(168,85,247,0.5), 0 0 50px rgba(168,85,247,0.3);
  }
  .hero-btn-primary:hover {
    transform: scale(1.05);
    box-shadow: 0 0 35px rgba(168,85,247,0.7), 0 0 70px rgba(168,85,247,0.4);
  }
  .hero-btn-primary:active {
    transform: scale(0.98);
  }

  .hero-btn-secondary {
    box-shadow: 0 0 15px rgba(168,85,247,0.3);
  }
  .hero-btn-secondary:hover {
    transform: scale(1.05);
    box-shadow: 0 0 25px rgba(168,85,247,0.5);
  }
  .hero-btn-secondary:active {
    transform: scale(0.98);
  }

  /* Scroll parallax fade */
  .hero-main {
    transition: opacity 0.1s linear;
  }
</style>

<script>
  // Typewriter effect - pure vanilla JS (~30 lines vs 308KB React+Framer)
  const messages = [
    "initializing focus protocol",
    "loading future_of_work.exe",
    "מחשב כמה עובדים AI יחליף...",
    "מחברים אנשים וטכנולוגיה",
    "scanning for humans who still use Excel",
    "deploying ai_agents --mode=beast",
    "building the future, one prompt at a time",
    "sudo make me a sandwich... with AI",
    "ChatGPT לא יחליף אותך. מישהו שיודע להשתמש בו כן.",
    "while(true) { learn(); adapt(); profit(); }",
    "אל תשאלו מה AI יכול לעשות בשבילכם...",
    "ERROR 404: excuses not found",
    "pip install competitive-advantage",
    "git commit -m 'make me rich'",
    "loading motivation.js... done. now do something.",
    "focus.ai — your AI partner",
  ];

  const el = document.getElementById('typewriter-text');
  if (el) {
    let msgIdx = Math.floor(Math.random() * messages.length);
    let charIdx = 0;
    let deleting = false;

    function tick() {
      const msg = messages[msgIdx];

      if (!deleting) {
        if (charIdx < msg.length) {
          charIdx++;
          el.textContent = msg.slice(0, charIdx);
          setTimeout(tick, 50);
        } else {
          setTimeout(() => { deleting = true; tick(); }, 3500);
        }
      } else {
        if (charIdx > 0) {
          charIdx--;
          el.textContent = msg.slice(0, charIdx);
          setTimeout(tick, 30);
        } else {
          deleting = false;
          msgIdx = (msgIdx + 1) % messages.length;
          setTimeout(tick, 200);
        }
      }
    }

    tick();
  }

  // Scroll parallax fade - disabled (hero stays fully visible)
</script>
